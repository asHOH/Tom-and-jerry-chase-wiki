import { Buff, BuffDefinition } from './types';

export const getBuffImageUrl = (name: string, buff: BuffDefinition): string => {
  if (!!buff.specialImageUrl) return buff.specialImageUrl;
  if (buff.unuseImage)
    return `/images/buffs/default-${buff.type === '负面' ? 'debuff' : 'buff'}.png`;
  return `/images/buffs/${encodeURIComponent(name)}.png`;
};

//-----------------复用文案汇总区-----------------/
const moveStack = {
  stack:
    '角色的基础速度遵循以下规则：先判断是否有{速度恒定}效果，随后按[乘算](先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)叠加{加速}和{减速}效果，最后结算{速度下限锁定}效果。',
  detailedStack:
    '角色的基础速度遵循以下规则：先判断是否有{速度恒定}效果，随后按[乘算](先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)叠加{加速}和{减速}效果，随后若计算结果小于{速度下限锁定}效果的规定值，则将实际速度更改为规定值。\n效果计算公式：基础速度×(1+加速)×(1-减速)。',
};
const jumpStack = {
  stack:
    '可[乘算](先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)叠加。最终速度不会超过[竖直方向上的速度上限](目前测量该数值为2000/秒。又因为游戏内重力加速度为3000/秒²，因此在默认重力情况下平跳的跳跃高度上限约为660。当角色持有失重/超重效果时，该数值会发生变化)，且[水平与竖直方向上的速度呈负相关](水平方向上的速度提高时，竖直方向上的速度会降低。原因暂不详)。',
  detailedStack:
    '可[乘算](先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)叠加。最终速度不会超过[竖直方向上的速度上限](目前测量该数值为2000/秒。又因为游戏内重力加速度为3000/秒²，因此在默认重力情况下平跳的跳跃高度上限约为660。当角色持有失重/超重效果时，该数值会发生变化)，且[水平与竖直方向上的速度呈负相关](水平方向上的速度提高时，竖直方向上的速度会降低。原因暂不详)。\n另：跳跃高度与跳跃速度是两个概念，它们指代对象相同，但[单位数值不同](二者数值相同时，"提高跳跃高度"的效果要弱于"提高跳跃速度"，因为后者计算时需要平方)（目前网站部分数据对这两个概念多有混淆，待进一步测试和更正）。\n计算公式：基础速度×(1+加速)×(1-减速)，此外提高跳跃高度效果需转化为提高跳跃速度的数值才能进行计算。',
};
const interactionStack = {
  stack:
    '可叠加。正常情况下，固定值与百分比形式互相独立，先[各自结算](固定值效果直接加算，例如：两个+5的效果等价于一个+10的效果。百分比效果先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)，而后分别作为一个整体带入计算公式中。先结算百分比效果，后结算固定值效果。',
  detailedStack:
    '可叠加。正常情况下，固定值与百分比形式互相独立，先[各自结算](固定值效果直接加算，例如：两个+5的效果等价于一个+10的效果。百分比效果先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)，而后分别作为一个整体带入计算公式中。先结算百分比效果，后结算固定值效果。\n计算公式：基础速度×(1+百分比加速)×(1-百分比减速)+固定值加速-固定值减速。',
};
const damageFormula =
  '以下为全伤害计算公式：\n实际伤害=(基础伤害+角色攻击增伤+固定值攻击增减伤)×(1-百分比攻击减伤-百分比受击减伤)+固定值受击增减伤\n实际应用时，需注意不同分型的伤害可能会免受该公式的某部分或某几部分的数值影响，具体请查阅{伤害}的详细描述。\n{伤害上限锁定}和{伤害转移}效果在实际伤害计算完毕后再依次结算。';
const damageStack = {
  stack:
    '可叠加。正常情况下，数值的固定值与百分比形式互相独立，先[各自结算](固定值效果直接加算，例如：两个+5的效果等价于一个+10的效果。百分比效果先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)，而后分别作为一个整体带入伤害计算公式中。',
  detailedStack:
    '可叠加。正常情况下，数值的固定值与百分比形式互相独立，先[各自结算](固定值效果直接加算，例如：两个+5的效果等价于一个+10的效果。百分比效果先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)，而后分别作为一个整体带入伤害计算公式中。\n\n' +
    damageFormula,
};

const commonStack =
  '在未特殊注明时，同名效果重复获得改为刷新持续时间，同类效果可叠加生效且互不影响。';
const oneOnlyStack = '在未特殊注明时，同名效果重复获得改为刷新持续时间，同类效果只会生效一个。';
const multiplicationStack =
  '可[乘算](先各自+100%后再乘算，最终结果再-100%，例如：两个提高50%的效果等价于一个提高125%的效果)叠加。';

const shieldDifference =
  '\n\n持有{护盾}、{无敌}、{免控}、{霸体}、{绝对霸体}均可以免疫$后续受到的$text-bold#大多数控制效果，它们的鉴别点是：\n护盾：周身会出现护盾特效；有层数限制，可能有时间限制，可抵消伤害、虚弱和大多数软控制(例如禁用技能等）。\n无敌：周身会出现护盾特效；有时间限制，可免疫的控制效果范围与{护盾}完全一致。\n免控：周身可能会出现恢复或减伤的特效；有时间限制，通常不免疫伤害、虚弱和大多数软控制。此外，部分免控会免疫{隐身}。\n霸体：周身可能会出现恢复或减伤的特效；有时间限制，能免疫伤害、虚弱，部分霸体可免疫一部分软控制。此外，部分霸体会免疫{隐身}。\n绝对霸体：周身通常不会出现特效；有时间限制，免疫绝大多数负面效果，其免疫范围要比普通霸体广泛；但同时也会免疫{隐身}、{二段跳}等正面效果。';
//--------------------数据区---------------------/
const buffDefinitions: Record<string, BuffDefinition> = {
  //--------------------移动与跳跃---------------------/
  加速: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      aliases: ['移速提高', '#^(?:移速(?:提高|增加|增大)|(?:提高|增加|增大)移速)$'],
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的移速提高一定百分比。只有当角色执行移动操作时，基础属性中的移速数值才会体现在实际移速上。',
      source: [
        { name: '乘胜追击', type: 'knowledgeCard' },
        { name: '乾坤一掷', type: 'knowledgeCard' },
        { name: '穷追猛打', type: 'knowledgeCard' },
        { name: '越挫越勇', type: 'knowledgeCard' },
        { name: '攻其不备', type: 'knowledgeCard' },
        { name: '春风得意', type: 'knowledgeCard' },
        { name: '气势如牛', type: 'knowledgeCard' },
        { name: '狡诈', type: 'knowledgeCard' },
        { name: '回家', type: 'knowledgeCard' },
        { name: '冲冠一怒', type: 'knowledgeCard' },
        { name: '祝愿', type: 'knowledgeCard' },
        { name: '翩若惊鸿', type: 'knowledgeCard' },
        { name: '逃窜', type: 'knowledgeCard' },
        { name: '闭门羹', type: 'knowledgeCard' },
        { name: '孤军奋战', type: 'knowledgeCard' },
        { name: '应激反应', type: 'knowledgeCard' },
        { name: '追风', type: 'knowledgeCard' },
        { name: '逃之夭夭', type: 'knowledgeCard' },
        { name: '不屈', type: 'knowledgeCard' },
        { name: '牛奶', type: 'item' },
        { name: '变身饮料', type: 'item' },
        { name: '发怒冲刺', type: 'skill' },
        { name: '捕鼠专家', type: 'skill' },
        { name: '横冲直撞', type: 'skill' },
        { name: '力大无穷', type: 'skill' },
        { name: '双重猫格', type: 'skill' },
        { name: '瞬移闪击', type: 'skill' },
        { name: '穷追不舍', type: 'skill' },
        { name: '鞭子', type: 'skill' },
        { name: '仙人掌弹弓', type: 'skill' },
        { name: '魅力甲油', type: 'skill' },
        { name: '香水美人', type: 'skill' },
        { name: '警戒', type: 'skill' },
        { name: '皇家火炮', type: 'skill' },
        { name: '随机应变', type: 'skill' },
        { name: '汽水罐', type: 'skill' },
        { name: '牛仔鞭索', type: 'skill' },
        { name: '心思缜密', type: 'skill' },
        { name: '骑士连斩', type: 'skill' },
        { name: '旋刃剑舞', type: 'skill' },
        { name: '骑士之剑', type: 'skill' },
        { name: '虚幻梦影', type: 'skill' },
        { name: '身体素质', type: 'skill' },
        { name: '骄傲的学霸', type: 'skill' },
        { name: '律动时间', type: 'skill' },
        { name: '天使强化', type: 'skill' },
        { name: '迅', type: 'skill' },
        { name: '狂欢时刻', type: 'skill' },
        { name: '狡兔三窟', type: 'skill' },
        { name: '胡萝卜', type: 'skill' },
        { name: '我，兔八哥', type: 'skill' },
        { name: '战术机动', type: 'skill' },
        { name: '舞花枪', type: 'skill' },
        { name: '鼓舞', type: 'skill' },
        { name: '奶酪好手', type: 'skill' },
        { name: '隐身', type: 'skill' },
        { name: '烟雾弹', type: 'skill' },
        { name: '视觉干扰器', type: 'skill' },
        { name: '胆小如鼠', type: 'skill' },
        { name: '二段跳', type: 'skill' },
        { name: '降落伞', type: 'skill' },
        { name: '登山飞镐', type: 'skill' },
        { name: '身轻如燕', type: 'skill' },
        { name: '威严光盾', type: 'skill' },
        { name: '闪电救援', type: 'skill' },
        { name: '剑舞华尔兹', type: 'skill' },
        { name: '圆滚滚', type: 'skill' },
        { name: '勇气冲刺', type: 'skill' },
        { name: '牛仔吉他', type: 'skill' },
        { name: '西部风情', type: 'skill' },
        { name: '地狱裂隙', type: 'skill' },
        { name: '捣蛋鬼', type: 'skill' },
        { name: '意念控制', type: 'skill' },
        { name: '黑暗印记', type: 'skill' },
        { name: '温柔体贴', type: 'skill' },
        { name: '怜悯之心', type: 'skill' },
        { name: '兔子先生', type: 'skill' },
        { name: '最佳表演', type: 'skill' },
        { name: '老牛仔', type: 'skill' },
        { name: '追踪饮料', type: 'skill' },
        { name: '暗中观察', type: 'skill' },
        { name: '幻影剑气', type: 'skill' },
        { name: '香风折扇', type: 'skill' },
        { name: '优雅从容', type: 'skill' },
        { name: '怒气喷发', type: 'skill' },
        { name: '坚强的米雪儿', type: 'skill' },
        { name: '风格骤变', type: 'skill' },
        { name: '我，即是军团。', type: 'skill' },
        { name: '能源装置', type: 'skill' },
        { name: '必备专业素养', type: 'skill' },
        { name: '莱恩的世界', type: 'skill' },
        { name: '胡椒粉罐头', type: 'entity' },
        { name: '套索', type: 'entity' },
        { name: '列车', type: 'entity' },
        { name: '守护战旗', type: 'entity' },
        { name: '干扰器', type: 'entity' },
        { name: '弓箭', type: 'entity' },
        { name: '蓄力箭', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...moveStack,
  },
  减速: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      aliases: ['移速降低', '#^(?:移速(?:降低|减少|减小)|(?:降低|减少|减小)移速)$'],
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的移速降低一定百分比。只有当角色执行移动操作时，基础属性中的移速数值才会体现在实际移速上。',
      source: [
        { name: '威压', type: 'knowledgeCard' },
        { name: '细心', type: 'knowledgeCard' },
        { name: '减速警告', type: 'knowledgeCard' },
        { name: '都是朋友', type: 'knowledgeCard' },
        { name: '投手', type: 'knowledgeCard' },
        { name: '盘子', type: 'item' },
        { name: '扁盘', type: 'item' },
        { name: '玻璃杯', type: 'item' },
        { name: '碗', type: 'item' },
        { name: '叉子', type: 'item' },
        { name: '高尔夫球', type: 'item' },
        { name: '番茄', type: 'item' },
        { name: '玩具枪', type: 'item' },
        { name: '奶酪', type: 'item' },
        { name: '穷追不舍', type: 'skill' },
        { name: '鞭子', type: 'skill' },
        { name: '喵喵叫', type: 'skill' },
        { name: '防狼锤', type: 'skill' },
        { name: '西部情谊', type: 'skill' },
        { name: '骑士连斩', type: 'skill' },
        { name: '旋刃剑舞', type: 'skill' },
        { name: '狂欢时刻', type: 'skill' },
        { name: '我，兔八哥', type: 'skill' },
        { name: '舞花枪', type: 'skill' },
        { name: '无坚不摧', type: 'skill' },
        { name: '牛仔吉他', type: 'skill' },
        { name: '捣蛋鬼', type: 'skill' },
        { name: '勇气冲刺', type: 'skill' },
        { name: '止戈雷云', type: 'skill' },
        { name: '弹力圆球', type: 'skill' },
        { name: '幻影剑气', type: 'skill' },
        { name: '优雅从容', type: 'skill' },
        { name: '沙包拳头', type: 'skill' },
        { name: '怒气喷发', type: 'skill' },
        { name: '小情绪', type: 'skill' },
        { name: '共鸣', type: 'skill' },
        { name: '说出你的故事', type: 'skill' },
        { name: '果子', type: 'entity' },
        { name: '子弹', type: 'entity' },
        { name: '垃圾桶', type: 'entity' },
        { name: '咸鱼', type: 'entity' },
        { name: '香水区域', type: 'entity' },
        { name: '炮弹', type: 'entity' },
        { name: '汽水罐', type: 'entity' },
        { name: '飞吻', type: 'entity' },
        { name: '胡萝卜飞镖', type: 'entity' },
        { name: '巨型胡萝卜', type: 'entity' },
        { name: '烟雾', type: 'entity' },
        { name: '长枪', type: 'entity' },
        { name: '星星', type: 'entity' },
        { name: '星星-敌方', type: 'entity' },
        { name: '大仙人掌', type: 'entity' },
        { name: '小仙人掌', type: 'entity' },
        { name: '雷云', type: 'entity' },
        { name: '红色卡牌', type: 'entity' },
        { name: '三角', type: 'entity' },
        { name: '强化三角', type: 'entity' },
        { name: '乾坤袋(投射物)', type: 'entity' },
        { name: '柠檬', type: 'entity' },
        { name: '毛线球', type: 'entity' },
        { name: '毛线', type: 'entity' },
        { name: '激光', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...moveStack,
  },
  跳跃高度提高: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      aliases: [
        '跳跃速度提高',
        '#^(?:跳跃(?:速度|高度)(?:提高|增加|增大)|(?:提高|增加|增大)跳跃(?:速度|高度))$',
      ],
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的跳跃高度提高一定百分比。只有当角色执行[大跳](起跳后保持长按跳跃键至少1秒，且中途不进行横向移动，以达到常规情况下角色最大的跳跃高度)操作时，基础属性中的跳跃高度数值才会体现在实际跳跃高度上。',
      source: [
        { name: '春风得意', type: 'knowledgeCard' },
        { name: '气势如牛', type: 'knowledgeCard' },
        { name: '冲冠一怒', type: 'knowledgeCard' },
        { name: '祝愿', type: 'knowledgeCard' },
        { name: '逃窜', type: 'knowledgeCard' },
        { name: '飞跃', type: 'knowledgeCard' },
        { name: '变身饮料', type: 'item' },
        { name: '鼓舞', type: 'skill' },
        { name: '奶酪好手', type: 'skill' },
        { name: '胆小如鼠', type: 'skill' },
        { name: '二段跳', type: 'skill' },
        { name: '身轻如燕', type: 'skill' },
        { name: '圆滚滚', type: 'skill' },
        { name: '牛仔吉他', type: 'skill' },
        { name: '捣蛋鬼', type: 'skill' },
        { name: '黑暗印记', type: 'skill' },
        { name: '爱心之吻', type: 'skill' },
        { name: '温柔体贴', type: 'skill' },
        { name: '老牛仔', type: 'skill' },
        { name: '暗中观察', type: 'skill' },
        { name: '野生体格', type: 'skill' },
        { name: '古灵精怪', type: 'skill' },
        { name: '能源装置', type: 'skill' },
        { name: '灵气修为', type: 'skill' },
        { name: '胡椒粉罐头', type: 'entity' },
        { name: '烟雾', type: 'entity' },
        { name: '灵巧战旗', type: 'entity' },
        { name: '剑气', type: 'entity' },
        { name: '藤蔓', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...jumpStack,
  },
  跳跃高度降低: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      aliases: [
        '跳跃速度降低',
        '#^(?:跳跃(?:速度|高度)(?:降低|减少|减小)|(?:降低|减少|减小)跳跃(?:速度|高度))$',
      ],
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的跳跃高度降低一定百分比。只有当角色执行[大跳](起跳后保持长按跳跃键至少1秒，且中途不进行横向移动，以达到常规情况下角色最大的跳跃高度)操作时，基础属性中的跳跃高度数值才会体现在实际跳跃高度上。',
      source: [
        { name: '奶酪', type: 'item' },
        { name: '捣蛋鬼', type: 'skill' },
        { name: '喵喵叫', type: 'skill' },
        { name: '防狼锤', type: 'skill' },
        { name: '香水区域', type: 'entity' },
        { name: '汽水罐', type: 'entity' },
        { name: '烟雾', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...jumpStack,
  },
  速度恒定: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的移速和（或）跳跃高度固定为一定值。只有当角色执行移动操作时，基础属性中的移速数值才会体现在实际移速上。',
      source: [{ name: '说出你的故事', type: 'skill' }],
      unuseImage: true,
    },
    ...moveStack,
  },
  速度下限锁定: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      aliases: ['锁定速度下限'],
      duration: '不固定',
      failure: '根据状态来源决定',
      description:
        '使角色$基础属性$font-bold#中的移速不低于一定值。只有当角色执行移动操作时，基础属性中的移速数值才会体现在实际移速上。',
      source: [{ name: '优雅从容', type: 'skill' }],
      unuseImage: true,
    },
    ...moveStack,
  },
  速度保持: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色保持当前[$实际速度$font-bold#](包括横向和/或纵向速度，二者独立判定)，直到下一次[主动改变移动状态](角色有三种移动状态：向左移动，向右移动，静止。角色可以通过操作键改变该状态。当角色处于眩晕等无法移动的状态时，由于无法主动改变移动状态，因此速度保持状态会一直持续下去)。该状态持续期间，角色实际速度不因转向等操作而改变，但会因遇到斜面或从空中坠落等原因改变。该效果可看做一种极为特殊的{眩晕}。',
    sourceDescription:
      '“可移动释放”的技能在前后摇期间、蓄力类技能在蓄力期间、部分有施法动作的技能在技能期间、{击退}在持续期间内均处于此状态。',
    unuseImage: true,
  },
  速度重置: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色的[$实际速度$font-bold#](包括横向和/或纵向速度，二者独立判定)重置为0或某个特定值。',
    sourceDescription:
      '猫咪释放爪刀时会自动重置纵向速度为0。“不可移动释放”的技能在释放瞬间、蓄力类技能在蓄力开始时会自动重置横向速度为0。部分冲刺位移类技能会以固定速度冲刺。{降落伞}释放时也会重置速度。',
    unuseImage: true,
  },
  惯性保持: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色的[$实际速度$font-bold#](包括横向和/或纵向速度，二者独立判定)在停止移动后不立刻归零，而是缓慢降低至0。',
    source: [{ name: '头盔', type: 'entity' }],
    unuseImage: true,
  },
  多段跳: {
    type: '正面',
    global: false,
    target: '角色',
    aliases: ['二段跳', '三段跳', '额外跳跃'],
    duration: '不固定',
    description: '可以在空中额外进行数次跳跃。',
    stack: '不可叠加，取额外跳跃段数更多者生效。',
    source: [
      { name: '二段跳', type: 'skill' },
      { name: '降落伞', type: 'skill' },
      { name: '灵巧战旗', type: 'entity' },
      { name: '星星', type: 'entity' },
      { name: '魔术漂浮', type: 'specialSkill' },
    ],
    unuseImage: true,
  },
  失重: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '降低受到的重力大小，因此$实际跳跃高度$font-bold#会增加，滞空时间亦会延长。',
    detailedDescription:
      '降低自身受到的重力大小，因此$实际跳跃高度$font-bold#会增加，滞空时间亦会延长。\n游戏内默认重力环境下的重力加速度为3000/秒²，角色速度上限为2000/秒。失重不会改变速度上限的大小。',
    stack: '[无法叠加，同类效果只生效一个](具体生效优先级待测试)。',
    sourceDescription: '{完全失重}可以看做是一种特殊的失重效果，但特性有一定差别。',
    source: [
      { name: '魔术漂浮', type: 'specialSkill' },
      { name: '灵巧战旗', type: 'entity' },
      { name: '蓝色卡牌', type: 'entity' },
    ],
    unuseImage: true,
  },
  完全失重: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '使受到的重力归零。此状态下受到{击退}效果时会直接沿受力方向飞出。',
    detailedDescription:
      '使受到的重力归零。此状态下受到{击退}效果时会直接沿受力方向飞出。\n游戏内默认重力环境下的重力加速度为3000/秒²，角色速度上限为2000/秒。失重不会改变速度上限的大小。',
    stack: '无法叠加，且优先于{失重}/{超重}生效。',
    source: [
      { name: '骑士连斩', type: 'skill' },
      { name: '世界波', type: 'skill' },
      { name: '牵引', type: 'buff' },
      { name: '飞行', type: 'buff' },
    ],
    unuseImage: true,
  },
  超重: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '提高自身受到的重力大小，因此$实际跳跃高度$font-bold#会减少，滞空时间亦会缩短。',
    detailedDescription:
      '提高自身受到的重力大小，因此$实际跳跃高度$font-bold#会减少，滞空时间亦会缩短。\n游戏内默认重力环境下的重力加速度为3000/秒²，角色速度上限为2000/秒。失重不会改变速度上限的大小。',
    stack: '[无法叠加，同类效果只生效一个](具体生效优先级待测试)。',
    source: [{ name: '头盔', type: 'entity' }],
    unuseImage: true,
  },
  击退: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    failure: '角色可以移动时',
    description: '使角色向指定方向被动运动，期间无法移动、跳跃、使用技能和道具。',
    detailedDescription:
      '使角色向指定方向以一定的初速度进行被动运动，期间持有{速度保持}，且无法移动、跳跃、使用技能和道具。\n少部分击退具有额外修正机制：角色在因击退导致的眩晕期间再次受到{常规眩晕}，则该眩晕期间仍保持惯性；角色在击退过程期间运动距离达到一定长度时，会改为向反方向运动，至最初位置后停止。',
    stack: '多次击退速度不叠加，通常取最后受到的击退效果的速度。',
    source: [
      { name: '小鞭炮', type: 'item' },
      { name: '鞭炮束', type: 'item' },
      { name: '戏剧转折', type: 'skill' },
      { name: '魔音贯耳', type: 'skill' },
      { name: '比萨斜塔', type: 'skill' },
      { name: '沙包拳头', type: 'skill' },
      { name: '瑜伽球', type: 'entity' },
      { name: '列车', type: 'entity' },
      { name: '飓风', type: 'entity' },
      { name: '火药桶', type: 'entity' },
      { name: '红色小淘气', type: 'entity' },
    ],
    unuseImage: true,
  },
  牵引: {
    type: '特殊',
    global: false,
    target: '角色或道具',
    aliases: ['鱼钩眩晕'],
    duration: '不固定',
    description: '使物体向另一物体所在位置运动。',
    detailedDescription:
      '使被牵引物体向牵引方向以固定速度被动运动，期间持有{完全失重}。\n注：{尼宝的朋友(衍生物)}对敌方产生牵引时兼具使其掉落手中老鼠的效果，因与眩晕类似，又名鱼钩眩晕。\n少部分牵引只有在被牵引者与牵引者接触时才会停止。为避免因部分地形阻挡导致出现极端情况，这类牵引通常具有额外修正机制：若长时间未到达终点则会将目标直接{传送}到对应位置。',
    source: [
      { name: '牛仔鞭索', type: 'skill' },
      { name: '旋刃剑舞', type: 'skill' },
      { name: '狂', type: 'skill' },
      { name: '爱心花束', type: 'skill' },
      { name: '手型枪', type: 'entity' },
      { name: '项坠', type: 'entity' },
      { name: '尼宝的朋友', type: 'entity' },
      { name: '毛线球', type: 'entity' },
    ],
    unuseImage: true,
  },
  传送: {
    type: '特殊',
    global: false,
    target: '角色或道具',
    duration: '一次性',
    description:
      '使物体瞬间改变所处位置。若被传送的物体是角色，则[正常情况下](角色被二次传送、被传送到地图外、处于观战期间等特殊情况下，视野可能不会立刻切换到对应位置)会立即换到对应位置的视野。',
    sourceDescription: '角色在进行出洞、钻管道等操作时，其本质就是传送。',
    source: [
      { name: '瞬移闪击', type: 'skill' },
      { name: '魔术戏法', type: 'skill' },
      { name: '闪亮营救', type: 'skill' },
      { name: '天空扶梯', type: 'entity' },
      { name: '恶魔之门', type: 'entity' },
      { name: '红色卡牌', type: 'entity' },
      { name: '黄色卡牌', type: 'entity' },
      { name: '蓝色卡牌', type: 'entity' },
      { name: '兔子大表哥', type: 'entity' },
      { name: '魔镜', type: 'entity' },
    ],
    unuseImage: true,
  },
  //--------------------伤害与回复---------------------/
  伤害: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '一次性',
    description:
      '使角色立刻减少一定Hp，若Hp因此降低至0以下则进入{虚弱}，同时使角色Hp复位为0。伤害有多种分型，各分型的特性（如计算方式等）略有不同。',
    detailedDescription:
      '使角色立刻减少一定Hp，若Hp因此降低至0以下则进入{虚弱}，同时使角色Hp复位为0。伤害有多种分型，各分型的特性（如计算方式等）略有不同。\n1.计算方式分型：受双方增减伤影响，受目标增减伤影响，不受增减伤影响，无来源。\n  受双方增减伤影响：适用正常的伤害计算公式。\n  受目标增减伤影响：不受公式中“基础攻击增伤”和“固定值攻击增减伤”和“百分比攻击减伤”影响，其余部分不变。\n  不受增减伤影响：实际伤害等于基础伤害（注：仍受伤害转移影响）。\n  无来源：实际伤害等于基础伤害（注：仍受伤害转移影响）。此外：[无法追溯伤害来源](无法被部分反击类技能索敌，包括：天使泰菲-天使翅膀，兔八哥-我，兔八哥，如玉-舞花枪)；不计入任何角色的[伤害统计](该统计可在经典模式的赛后进行即时查看，历史战绩中无法查看)；由此伤害击倒敌方/击破墙缝时无法触发播报。\n2.与{护盾}（包括部分有护盾特效的无敌）的互动关系：可破盾，不可破盾，无视护盾。\n  可破盾：可正常击破护盾。\n  不可破盾：无法击破护盾，对护盾不产生效果。\n  无视护盾（又名“真实伤害”“穿盾伤害"等）：攻击直接对角色本身造成伤害，无视其持有的护盾状态。若该伤害导致角色即将虚弱，则消耗1层护盾抵消该虚弱。\n3.与{受伤}的互动关系：可造成受伤，不可造成受伤。\n4.属性：常规，电击。\n  电击伤害：可触发{感电}和{电免疫}相关效果。',
    stack: '各伤害间互相独立，分别结算效果（有顺序先后）。',
    detailedStack: '各伤害间互相独立，分别结算效果（有顺序先后）。\n\n' + damageFormula,
    source: [
      { name: '捕鼠夹', type: 'knowledgeCard' },
      { name: '蓄力重击', type: 'specialSkill' },
      { name: '盘子', type: 'item' },
      { name: '扁盘', type: 'item' },
      { name: '玻璃杯', type: 'item' },
      { name: '碗', type: 'item' },
      { name: '叉子', type: 'item' },
      { name: '高尔夫球', type: 'item' },
      { name: '冰块', type: 'item' },
      { name: '小鞭炮', type: 'item' },
      { name: '鞭炮束', type: 'item' },
      { name: '灰花瓶', type: 'item' },
      { name: '蓝花瓶', type: 'item' },
      { name: '遥控器', type: 'item' },
      { name: '苍蝇拍', type: 'item' },
      { name: '拳套盒', type: 'item' },
      { name: '电风扇', type: 'item' },
      { name: '狗骨头', type: 'item' },
      { name: '平底锅', type: 'skill' },
      { name: '横冲直撞', type: 'skill' },
      { name: '垃圾盖', type: 'skill' },
      { name: '力大无穷', type: 'skill' },
      { name: '捕虫网', type: 'skill' },
      { name: '游刃有余', type: 'skill' },
      { name: '喵喵叫', type: 'skill' },
      { name: '防狼锤', type: 'skill' },
      { name: '西部情谊', type: 'skill' },
      { name: '骑士连斩', type: 'skill' },
      { name: '旋刃剑舞', type: 'skill' },
      { name: '骑士之剑', type: 'skill' },
      { name: '骄傲的学霸', type: 'skill' },
      { name: '律动时间', type: 'skill' },
      { name: '万有引力', type: 'skill' },
      { name: '狂', type: 'skill' },
      { name: '猎', type: 'skill' },
      { name: '迅', type: 'skill' },
      { name: '狂欢时刻', type: 'skill' },
      { name: '感同身受', type: 'skill' },
      { name: '战术机动', type: 'skill' },
      { name: '舞花枪', type: 'skill' },
      { name: '戏剧转折', type: 'skill' },
      { name: '大铁锤', type: 'skill' },
      { name: '剑舞华尔兹', type: 'skill' },
      { name: '格挡之剑', type: 'skill' },
      { name: '勇气冲刺', type: 'skill' },
      { name: '牛仔吉他', type: 'skill' },
      { name: '天使翅膀', type: 'skill' },
      { name: '魔音贯耳', type: 'skill' },
      { name: '最佳表演', type: 'skill' },
      { name: '弹力圆球', type: 'skill' },
      { name: '香风折扇', type: 'skill' },
      { name: '闪亮营救', type: 'skill' },
      { name: '沙包拳头', type: 'skill' },
      { name: '共鸣', type: 'skill' },
      { name: '勇往直前', type: 'skill' },
      { name: '强能灌注', type: 'skill' },
      { name: '能源装置', type: 'skill' },
      { name: '机械身躯', type: 'skill' },
      { name: '说出你的故事', type: 'skill' },
      { name: '记录美好瞬间', type: 'skill' },
      { name: '柠檬旋风', type: 'skill' },
      { name: '子弹', type: 'entity' },
      { name: '猫咪泡泡', type: 'entity' },
      { name: '墙缝泡泡', type: 'entity' },
      { name: '手型枪', type: 'entity' },
      { name: '煎蛋', type: 'entity' },
      { name: '旋转桶盖', type: 'entity' },
      { name: '泡泡', type: 'entity' },
      { name: '垃圾桶', type: 'entity' },
      { name: '斗牛', type: 'entity' },
      { name: '小仙人掌球', type: 'entity' },
      { name: '大仙人掌球', type: 'entity' },
      { name: '飞吻', type: 'entity' },
      { name: '炮弹', type: 'entity' },
      { name: '汽水罐', type: 'entity' },
      { name: '胡椒粉罐头', type: 'entity' },
      { name: '饭盒', type: 'entity' },
      { name: '套索', type: 'entity' },
      { name: '追求者', type: 'entity' },
      { name: '百科全书', type: 'entity' },
      { name: '瑜伽球', type: 'entity' },
      { name: '列车', type: 'entity' },
      { name: '洞穴', type: 'entity' },
      { name: '胡萝卜飞镖', type: 'entity' },
      { name: '巨型胡萝卜', type: 'entity' },
      { name: '飓风', type: 'entity' },
      { name: '铁砧', type: 'entity' },
      { name: '旋转的花枪', type: 'entity' },
      { name: '鸟哨鞭炮', type: 'entity' },
      { name: '金币', type: 'entity' },
      { name: '火药桶', type: 'entity' },
      { name: '火炮', type: 'entity' },
      { name: '火箭筒', type: 'entity' },
      { name: '感应雷', type: 'entity' },
      { name: '长枪', type: 'entity' },
      { name: '大仙人掌', type: 'entity' },
      { name: '小仙人掌', type: 'entity' },
      { name: '恶魔之门', type: 'entity' },
      { name: '蓝色小淘气', type: 'entity' },
      { name: '红色小淘气', type: 'entity' },
      { name: '绿色小淘气', type: 'entity' },
      { name: '弓箭', type: 'entity' },
      { name: '蓄力箭', type: 'entity' },
      { name: '雷云', type: 'entity' },
      { name: '红色卡牌', type: 'entity' },
      { name: '兔子大表哥', type: 'entity' },
      { name: '披萨', type: 'entity' },
      { name: '闪耀足球', type: 'entity' },
      { name: '剑气', type: 'entity' },
      { name: '战车-分离态', type: 'entity' },
      { name: '战矛', type: 'entity' },
      { name: '尼宝的朋友', type: 'entity' },
      { name: '小电球', type: 'entity' },
      { name: '大电球', type: 'entity' },
      { name: '电池', type: 'entity' },
      { name: '星星', type: 'entity' },
      { name: '星星-敌方', type: 'entity' },
      { name: '金币符', type: 'entity' },
      { name: '定身符', type: 'entity' },
      { name: '柠檬', type: 'entity' },
      { name: '圆形', type: 'entity' },
      { name: '强化圆形', type: 'entity' },
      { name: '三角', type: 'entity' },
      { name: '强化三角', type: 'entity' },
      { name: '机器鼠', type: 'entity' },
      { name: '比利鼠', type: 'entity' },
      { name: '持续伤害', type: 'buff' },
    ],
    unuseImage: true,
  },
  持续伤害: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '使角色每隔一段时间（通常是每秒）对角色造成一次伤害。',
    detailedDescription:
      '使角色每隔一段时间（通常是每秒）对角色造成一次伤害。（默认情况下，该伤害的分型为“不受增减伤影响，无视护盾，不可造成受伤”）',
    stack: commonStack,
    detailedStack: commonStack + '\n\n' + damageFormula,
    source: [
      { name: '牛仔吉他', type: 'skill' },
      { name: '最佳表演', type: 'skill' },
      { name: '垃圾桶', type: 'entity' },
      { name: '魅惑之吻', type: 'entity' },
      { name: '胡椒粉罐头', type: 'entity' },
      { name: '大仙人掌', type: 'entity' },
      { name: '小仙人掌', type: 'entity' },
    ],
    unuseImage: true,
  },
  攻击增伤: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      aliases: ['兴奋', '攻击力', '增伤', '造成伤害提高'],
      description: '按固定值提高自身造成的所有类型或部分类型的伤害。',
      sourceDescription: '部分角色基础属性中有自带的攻击增伤属性。',
      source: [
        { name: '暴怒', type: 'knowledgeCard' },
        { name: '乾坤一掷', type: 'knowledgeCard' },
        { name: '穷追猛打', type: 'knowledgeCard' },
        { name: '绝地反击', type: 'knowledgeCard' },
        { name: '全垒打', type: 'specialSkill' },
        { name: '兴奋饮料', type: 'item' },
        { name: '随机应变', type: 'skill' },
        { name: '野性迸发', type: 'skill' },
        { name: '虚幻梦影', type: 'skill' },
        { name: '身体素质', type: 'skill' },
        { name: '律动时间', type: 'skill' },
        { name: '感同身受', type: 'skill' },
        { name: '胡萝卜', type: 'skill' },
        { name: '剑与苹果', type: 'skill' },
        { name: '越战越勇', type: 'skill' },
        { name: '勇者无惧', type: 'skill' },
        { name: '黑暗印记', type: 'skill' },
        { name: '爱心之吻', type: 'skill' },
        { name: '超级变！变！变！', type: 'skill' },
        { name: '坚强的米雪儿', type: 'skill' },
        { name: '风格骤变', type: 'skill' },
        { name: '古灵精怪', type: 'skill' },
        { name: '能源装置', type: 'skill' },
        { name: '托普斯分身', type: 'entity' },
        { name: '香水区域', type: 'entity' },
        { name: '攻击战旗', type: 'entity' },
        { name: '恶魔之门', type: 'entity' },
        { name: '剑气', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...damageStack,
  },
  攻击减伤: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      aliases: ['弱化', '削伤', '造成伤害降低'],
      description: '按固定值或百分比降低自身造成的所有类型或部分类型的伤害（不低于0）。',
      source: [
        { name: '守株待鼠', type: 'knowledgeCard' },
        { name: '垃圾盖', type: 'skill' },
        { name: '说出你的故事', type: 'skill' },
        { name: '必备专业素养', type: 'skill' },
      ],
      unuseImage: true,
    },
    ...damageStack,
  },
  受击增伤: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      aliases: ['易伤', '受到伤害提高'],
      description:
        '按固定值提高自身受到的[所有](不包括归属于部分伤害分型的伤害，详见伤害相关界面)或指定类型的伤害。',
      source: [{ name: '托普斯分身', type: 'entity' }],
      unuseImage: true,
    },
    ...damageStack,
  },
  受击减伤: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      aliases: ['防御', '防御力', '减伤', '受到伤害降低'],
      description:
        '按固定值或百分比降低自身受到的[所有](不包括归属于部分伤害分型的伤害，详见伤害相关界面)或指定类型的伤害。',
      source: [
        { name: '皮糙肉厚', type: 'knowledgeCard' },
        { name: '虚幻梦影', type: 'skill' },
        { name: '律动时间', type: 'skill' },
        { name: '万有引力', type: 'skill' },
        { name: '狡兔三窟', type: 'skill' },
        { name: '友情庇护', type: 'skill' },
        { name: '天使翅膀', type: 'skill' },
        { name: '攻无不克', type: 'skill' },
        { name: '幻风礼服', type: 'skill' },
        { name: '怒气喷发', type: 'skill' },
        { name: '坚强的米雪儿', type: 'skill' },
        { name: '勇往直前', type: 'skill' },
        { name: '我，即是军团。', type: 'skill' },
        { name: '灵活跳跃', type: 'skill' },
        { name: '魔咒强身', type: 'skill' },
        { name: '必备专业素养', type: 'skill' },
        { name: '莱恩的世界', type: 'skill' },
        { name: '旋转桶盖', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...damageStack,
  },
  伤害上限锁定: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      duration: '不固定',
      failure: '根据状态来源决定',
      description: '使角色受到的伤害不高于一定值。',
      stack: '暂无同类效果。',
      detailedStack: '暂无同类效果。' + damageFormula,
      source: [{ name: '乾坤袋(NPC)', type: 'entity' }],
      unuseImage: true,
    },
  },
  伤害转移: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#伤害.*转移', '#转移.*伤害'],
    description: '将友方所受伤害的一定百分比转移至自身，以此减少友方所受伤害。',
    detailedDescription:
      '将友方所受伤害的一定百分比转移至自身，以此减少友方所受伤害。伤害转移效果具有修正机制：在正式结算伤害转移前，待结算伤害值不会超过友方的Hp上限。例：天使泰菲使用{1级友情庇护}为恶魔泰菲施加50%的伤害转移，此时恶魔泰菲受到{蓄力重击}造成的1000伤害，但由于自身Hp上限为74，因此最终结果为天使泰菲和恶魔泰菲各受37伤害。',
    stack:
      '[不可叠加，仅生效一个](具体机制待进一步测试)。具体伤害结算完毕后，先结算{伤害伤害锁定}，再结算{伤害转移}。此外，{伤害转移}和控制转移分别结算，这导致当队友受到一个既有伤害又有控制的状态效果时，根据结算顺序的不同，可能出现承受者承担2次伤害和1次控制的情况。',
    detailedStack:
      '[不可叠加，仅生效一个](具体机制待进一步测试)。具体伤害结算完毕后，先结算{伤害上限锁定}，再结算{伤害转移}。此外，{伤害转移}和控制转移分别结算，这导致当队友受到一个既有伤害又有控制的状态效果时，根据结算顺序的不同，可能出现承受者承担2次伤害和1次控制的情况，这是因为先结算了“伤害转移”导致受到第一次伤害，随后结算“控制转移”时新受到的控制又和伤害绑定，导致再次受到伤害。\n\n' +
      damageFormula,
    source: [
      { name: '有难同当', type: 'knowledgeCard' },
      { name: '友情庇护', type: 'skill' },
      { name: '双重猫格', type: 'skill' },
    ],
    unuseImage: true,
  },
  回复: {
    type: '正面',
    global: false,
    target: '角色',
    aliases: ['瞬间回复', '瞬间恢复', '回血'],
    duration: '一次性',
    description: '使角色立刻增加一定Hp（不会超过Hp上限）。',
    stack: '各回复间互相独立，分别结算效果（有顺序先后）。',
    source: [
      { name: '回家', type: 'knowledgeCard' },
      { name: '祝愿', type: 'knowledgeCard' },
      { name: '应急治疗', type: 'specialSkill', factionId: 'cat' },
      { name: '应急治疗', type: 'specialSkill', factionId: 'mouse' },
      { name: '牛奶', type: 'item' },
      { name: '蛋糕', type: 'item' },
      { name: '远视饮料', type: 'item' },
      { name: '隐身饮料', type: 'item' },
      { name: '护盾饮料', type: 'item' },
      { name: '兴奋饮料', type: 'item' },
      { name: '变身饮料', type: 'item' },
      { name: '神秘饮料', type: 'item' },
      { name: '捕鼠专家', type: 'skill' },
      { name: '双重猫格', type: 'skill' },
      { name: '律动时间', type: 'skill' },
      { name: '胡萝卜', type: 'skill' },
      { name: '戏剧转折', type: 'skill' },
      { name: '鼓舞', type: 'skill' },
      { name: '登山飞镐', type: 'skill' },
      { name: '剑与苹果', type: 'skill' },
      { name: '爱心之吻', type: 'skill' },
      { name: '温柔体贴', type: 'skill' },
      { name: '天使祝福', type: 'skill' },
      { name: '香风折扇', type: 'skill' },
      { name: '小情绪', type: 'skill' },
      { name: '香甜梦境', type: 'skill' },
      { name: '咸鱼', type: 'entity' },
      { name: '香水区域', type: 'entity' },
      { name: '恶魔之门', type: 'entity' },
      { name: '爱心之吻', type: 'entity' },
      { name: '花束', type: 'entity' },
      { name: '弓箭', type: 'entity' },
      { name: '蓄力箭', type: 'entity' },
      { name: '藤蔓', type: 'entity' },
      { name: '电池', type: 'entity' },
      { name: 'Hp上限提高', type: 'buff' },
      { name: '恢复', type: 'buff' },
    ],
    unuseImage: true,
  },
  Hp上限提高: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色的Hp上限提高，并立刻回复等额Hp。当失去Hp上限提高效果时，超出Hp上限的Hp将会被抹去，未超出则保留。',
    stack: commonStack,
    source: [
      { name: '越挫越勇', type: 'knowledgeCard' },
      { name: '不屈', type: 'knowledgeCard' },
      { name: '心思缜密', type: 'skill' },
      { name: '越战越勇', type: 'skill' },
      { name: '茁壮成长', type: 'skill' },
      { name: '爱心之吻', type: 'skill' },
      { name: '优雅从容', type: 'skill' },
      { name: '坚强的米雪儿', type: 'skill' },
      { name: '喜剧之王', type: 'skill' },
      { name: '兔子先生', type: 'entity' },
    ],
    unuseImage: true,
  },
  恢复: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['持续回复', '持续恢复'],
    description:
      '使角色每隔一段时间（通常是每秒）获得一次{回复}。部分恢复效果在获得瞬间会解除反向/失明等效果。该效果无视{受伤}，但会被{禁疗}影响。',
    detailedDescription:
      '使角色每隔一段时间（通常是每秒）获得一次{回复}。部分恢复效果在获得瞬间会解除反向/失明等效果。该效果无视{受伤}，但会被{禁疗}影响。\n注：一部分{加速}、{霸体}状态也会应用恢复恢复的显示特效，需注意甄别。',
    stack: commonStack,
    source: [
      { name: '越挫越勇', type: 'knowledgeCard' },
      { name: '回家', type: 'knowledgeCard' },
      { name: '逃窜', type: 'knowledgeCard' },
      { name: '应急治疗', type: 'specialSkill', factionId: 'cat' },
      { name: '应急治疗', type: 'specialSkill', factionId: 'mouse' },
      { name: '牛奶', type: 'item' },
      { name: '随机应变', type: 'skill' },
      { name: '心思缜密', type: 'skill' },
      { name: '身体素质', type: 'skill' },
      { name: '迅', type: 'skill' },
      { name: '胡萝卜', type: 'skill' },
      { name: '追风状态', type: 'skill' },
      { name: '隐身', type: 'skill' },
      { name: '剑与苹果', type: 'skill' },
      { name: '茁壮成长', type: 'skill' },
      { name: '牛仔吉他', type: 'skill' },
      { name: '黑暗印记', type: 'skill' },
      { name: '爱心之吻', type: 'skill' },
      { name: '温柔体贴', type: 'skill' },
      { name: '怜悯之心', type: 'skill' },
      { name: '兔子先生', type: 'skill' },
      { name: '最佳表演', type: 'skill' },
      { name: '暗中观察', type: 'skill' },
      { name: '怒气喷发', type: 'skill' },
      { name: '超级变！变！变！', type: 'skill' },
      { name: '风格骤变', type: 'skill' },
      { name: '我，即是军团。', type: 'skill' },
      { name: '灵活跳跃', type: 'skill' },
      { name: '说出你的故事', type: 'skill' },
      { name: '食物', type: 'entity' },
      { name: '香水区域', type: 'entity' },
      { name: '守护战旗', type: 'entity' },
      { name: '恶魔之门', type: 'entity' },
      { name: '披萨块', type: 'entity' },
      { name: '藤蔓', type: 'entity' },
      { name: '星星', type: 'entity' },
    ],
    unuseImage: true,
  },
  禁疗: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '使角色无法以任何方式{回复}Hp。',
    stack: oneOnlyStack,
    source: [
      { name: '咸鱼', type: 'skill' },
      { name: '野性迸发', type: 'skill' },
    ],
    unuseImage: true,
  },
  //--------------------控制与抵御控制---------------------/
  眩晕: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '无法移动、跳跃、使用技能和道具，此外通常兼具掉落手中道具/老鼠的效果（有特别注明时除外）。',
    stack: commonStack,
    source: [
      { name: '击晕', type: 'knowledgeCard' },
      { name: '灰花瓶', type: 'item' },
      { name: '蓝花瓶', type: 'item' },
      { name: '狗骨头', type: 'item' },
      { name: '拳套盒', type: 'item' },
      { name: '平底锅', type: 'skill' },
      { name: '横冲直撞', type: 'skill' },
      { name: '垃圾盖', type: 'skill' },
      { name: '捕虫网', type: 'skill' },
      { name: '瞬移闪击', type: 'skill' },
      { name: '鞭子', type: 'skill' },
      { name: '皇家火炮', type: 'skill' },
      { name: '喵喵叫', type: 'skill' },
      { name: '防狼锤', type: 'skill' },
      { name: '西部情谊', type: 'skill' },
      { name: '骑士连斩', type: 'skill' },
      { name: '旋刃剑舞', type: 'skill' },
      { name: '骑士之剑', type: 'skill' },
      { name: '自由翱翔', type: 'skill' },
      { name: '狂', type: 'skill' },
      { name: '感同身受', type: 'skill' },
      { name: '战术机动', type: 'skill' },
      { name: '舞花枪', type: 'skill' },
      { name: '掷花枪', type: 'skill' },
      { name: '戏剧转折', type: 'skill' },
      { name: '大铁锤', type: 'skill' },
      { name: '剑舞华尔兹', type: 'skill' },
      { name: '格挡之剑', type: 'skill' },
      { name: '勇气冲刺', type: 'skill' },
      { name: '牛仔吉他', type: 'skill' },
      { name: '攻无不克', type: 'skill' },
      { name: '弹力圆球', type: 'skill' },
      { name: '贵族礼仪', type: 'skill' },
      { name: '闪亮营救', type: 'skill' },
      { name: '沙包拳头', type: 'skill' },
      { name: '说出你的故事', type: 'skill' },
      { name: '柠檬旋风', type: 'skill' },
      { name: '共鸣', type: 'skill' },
      { name: '手型枪', type: 'entity' },
      { name: '旋转桶盖', type: 'entity' },
      { name: '斗牛', type: 'entity' },
      { name: '大仙人掌球', type: 'entity' },
      { name: '饭盒', type: 'entity' },
      { name: '套索', type: 'entity' },
      { name: '洞穴', type: 'entity' },
      { name: '胡萝卜飞镖', type: 'entity' },
      { name: '巨型胡萝卜', type: 'entity' },
      { name: '铁砧', type: 'entity' },
      { name: '金币', type: 'entity' },
      { name: '长枪', type: 'entity' },
      { name: '鸟哨鞭炮', type: 'entity' },
      { name: '金币', type: 'entity' },
      { name: '火炮', type: 'entity' },
      { name: '长枪', type: 'entity' },
      { name: '蓄力箭', type: 'entity' },
      { name: '披萨', type: 'entity' },
      { name: '闪耀足球', type: 'entity' },
      { name: '尼宝的朋友', type: 'entity' },
      { name: '机器鼠', type: 'entity' },
      { name: '硬直', type: 'buff' },
      { name: '冰冻', type: 'buff' },
      { name: '爆炸', type: 'buff' },
      { name: '电击', type: 'buff' },
      { name: '拍扁', type: 'buff' },
      { name: '定身', type: 'buff' },
      { name: '夹住', type: 'buff' },
      { name: '击退', type: 'buff' },
    ],
  },
  硬直: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['僵直'],
    description:
      '无法移动、跳跃、使用技能和道具，但通常$不$font-bold#具备掉落手中道具/老鼠的效果（有特别注明时除外）。该效果可看做一种特殊{眩晕}。',
    stack: commonStack,
    sourceDescription:
      '为便于区分，此处只将动作与效果均与碎片造成的“硬直”相同的效果收录为“硬直”，其它均收录为“眩晕”。',
    source: [
      { name: '干扰投掷', type: 'specialSkill' },
      { name: '牛仔吉他', type: 'skill' },
      { name: '碎片', type: 'entity' },
      { name: '大仙人掌', type: 'entity' },
      { name: '小仙人掌', type: 'entity' },
    ],
  },
  冰冻: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['冰冻眩晕'],
    description:
      '无法移动、跳跃、使用技能和道具，此外通常兼具掉落手中道具/老鼠的效果（有特别注明时除外）。该效果与{眩晕}仅有表现外观的区别。',
    stack: commonStack,
    source: [
      { name: '冰块', type: 'item' },
      { name: '感同身受', type: 'skill' },
      { name: '汽水罐', type: 'entity' },
    ],
  },
  爆炸: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['爆炸眩晕'],
    description:
      '无法移动、跳跃、使用技能和道具，此外通常兼具掉落手中道具/老鼠的效果（有特别注明时除外）。该效果与{眩晕}仅有表现外观的区别。',
    stack: commonStack,
    source: [
      { name: '小鞭炮', type: 'item' },
      { name: '鞭炮束', type: 'item' },
      { name: '感同身受', type: 'skill' },
      { name: '猫咪泡泡', type: 'entity' },
      { name: '墙缝泡泡', type: 'entity' },
      { name: '炮弹', type: 'entity' },
      { name: '追求者', type: 'entity' },
      { name: '鸟哨鞭炮', type: 'entity' },
      { name: '火药桶', type: 'entity' },
      { name: '火箭筒', type: 'entity' },
      { name: '感应雷', type: 'entity' },
      { name: '长枪', type: 'entity' },
    ],
  },
  电击: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#电击'],
    description:
      '无法移动、跳跃、使用技能和道具，并叠加一层{感电}，此外通常兼具掉落手中道具/老鼠的效果（有特别注明时除外）。该效果可看做一种特殊{眩晕}。',
    stack: commonStack,
    source: [
      { name: '电风扇', type: 'item' },
      { name: '迅', type: 'skill' },
      { name: '强能灌注', type: 'skill' },
      { name: '能源装置', type: 'skill' },
      { name: '机械身躯', type: 'skill' },
      { name: '雷云', type: 'entity' },
      { name: '小电球', type: 'entity' },
      { name: '大电球', type: 'entity' },
      { name: '电池', type: 'entity' },
    ],
  },
  拍扁: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#拍扁'],
    description:
      '无法移动、跳跃、使用技能和道具，并掉落手中道具/老鼠。此外，老鼠在该状态期间可被{直接抓起}。该效果可看做一种特殊{眩晕}。',
    stack: commonStack,
    source: [{ name: '苍蝇拍', type: 'item' }],
  },
  定身: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#拍扁'],
    description:
      '无法移动、跳跃、使用技能和道具，横向运动速度立即归零，并{完全失重}。该效果可看做一种特殊{眩晕}。',
    stack: commonStack,
    source: [{ name: '定身符', type: 'entity' }],
    unuseImage: true,
  },
  夹住: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    failure: '通过挣扎键挣扎，挣扎进度充满后解除此状态',
    aliases: ['#夹住'],
    description:
      '无法移动、跳跃、使用技能和道具，并掉落手中道具/老鼠。此外，屏幕下方出现进度条，只有通过挣扎键增加挣扎进度条，进度条充满时才能挣脱。该效果可看做一种极为特殊的{眩晕}。',
    stack: '角色同时最多只会被一个物件夹住。当角色处于眩晕等状态时，无法进行挣扎操作。',
    source: [
      { name: '老鼠夹', type: 'item' },
      { name: '打开的老鼠夹', type: 'entity' },
      { name: '泡泡', type: 'entity' },
      { name: '百科全书', type: 'entity' },
    ],
    unuseImage: true,
  },
  滑行: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    failure: '与滑行物停止接触后解除',
    aliases: ['#夹住'],
    description:
      '沿滑行物向角色面朝方向移动，期间无法转向、跳跃。滑行会会打断部分动作（例如技能前后摇等）。',
    stack:
      '与冰面等滑行物接触时立刻强制进入滑行状态。（部分护盾、无敌等效果可免疫滑行，通常不会消耗护盾层数）',
    source: [{ name: '冰面', type: 'entity' }],
    unuseImage: true,
  },
  护盾: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '抵消受到的绝大多数负面状态/效果，每次成功抵消均会消耗护盾层数，层数耗尽时护盾消失。部分护盾在抵挡指定类型的负面状态时不消耗层数。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身会出现护盾特效。',
    detailedDescription:
      '抵消受到的绝大多数负面状态/效果，每次成功抵消均会消耗护盾层数，层数耗尽时护盾消失。部分护盾在抵挡指定类型的负面状态时不消耗层数。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身会出现护盾特效。' +
      shieldDifference,
    stack: commonStack + '护盾效果有各自的优先级，优先消耗优先级靠前的护盾。',
    source: [
      { name: '护盾饮料', type: 'item' },
      { name: '护佑', type: 'knowledgeCard' },
      { name: '回家', type: 'knowledgeCard' },
      { name: '皇家火炮', type: 'skill' },
      { name: '迷乱列车', type: 'skill' },
      { name: '威严光盾', type: 'skill' },
      { name: '勇者无惧', type: 'skill' },
      { name: '天使祝福', type: 'skill' },
      { name: '野生体格', type: 'skill' },
      { name: '小情绪', type: 'skill' },
      { name: '幻风礼服', type: 'skill' },
      { name: '守护战旗', type: 'entity' },
      { name: '恶魔之门', type: 'entity' },
    ],
    unuseImage: true,
  },
  无敌: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '抵消受到的绝大多数负面状态/效果。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身会出现护盾特效，与{护盾}类似。',
    detailedDescription:
      '抵消受到的绝大多数负面状态/效果。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身会出现护盾特效，与{护盾}类似。' +
      shieldDifference,
    stack: commonStack,
    source: [
      { name: '无畏', type: 'knowledgeCard' },
      { name: '舍己', type: 'knowledgeCard' },
      { name: '冰冻保鲜', type: 'specialSkill' },
      { name: '发怒冲刺', type: 'skill' },
      { name: '牛仔鞭索', type: 'skill' },
      { name: '国王权杖', type: 'skill' },
      { name: '老牛仔', type: 'skill' },
      { name: '攻无不克', type: 'skill' },
      { name: '猫虚弱', type: 'buff' },
    ],
    unuseImage: true,
  },
  免控: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['弱霸体', '免疫控制'],
    description:
      '免疫部分负面状态/效果，[通常](部分免疫虚弱但不免疫伤害的效果也会被归类为“免控”，而非“霸体”)$不$text-bond#包括{伤害}或{虚弱}。[不同免控效果免疫的范围不同](推测这是因为免控实际上由"白名单"实现，在这个名单上的状态均会被免疫，而不同免控的白名单差异很大)。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身可能会出现恢复或减伤的特效，但仅仅只是借用特效，实际效果无关。',
    detailedDescription:
      '免疫部分负面状态/效果，[通常](部分免疫虚弱但不免疫伤害的效果也会被归类为“免控”，而非“霸体”)$不$text-bond#包括{伤害}或{虚弱}。[不同免控效果免疫的范围不同](推测这是因为免控实际上由"白名单"实现，在这个名单上的状态均会被免疫，而不同免控的白名单差异很大)。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身可能会出现恢复或减伤的特效，但仅仅只是借用特效，实际效果无关。' +
      shieldDifference,
    stack: commonStack,
    source: [
      { name: '律动时间', type: 'skill' },
      { name: '天使强化', type: 'skill' },
      { name: '狂', type: 'skill' },
      { name: '狂欢时刻', type: 'skill' },
      { name: '追风状态', type: 'skill' },
      { name: '登山飞镐', type: 'skill' },
      { name: '剑舞华尔兹', type: 'skill' },
      { name: '圆滚滚', type: 'skill' },
      { name: '西部风情', type: 'skill' },
      { name: '天使翅膀', type: 'skill' },
      { name: '弹力圆球', type: 'skill' },
      { name: '怒气喷发', type: 'skill' },
      { name: '勇往直前', type: 'skill' },
      { name: '灵活跳跃', type: 'skill' },
      { name: '说出你的故事', type: 'skill' },
      { name: '滑步踢', type: 'skill' },
      { name: '梦幻舞步', type: 'skill' },
    ],
    unuseImage: true,
  },
  霸体: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['强霸体'],
    description:
      '免疫绝大多数负面状态/效果，包括{伤害}和{虚弱}，但有时也会免疫{隐身}。[不同霸体效果免疫的范围不同](推测这是因为霸体的免疫实际上由"白名单"实现，在这个名单上的状态均会被免疫，而不同霸体的白名单差异很大)。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身可能会出现恢复或减伤的特效，但仅仅只是借用特效，实际效果无关。',
    detailedDescription:
      '免疫绝大多数负面状态/效果，包括{伤害}和{虚弱}，但有时也会免疫{隐身}。[不同霸体效果免疫的范围不同](推测这是因为霸体的免疫实际上由"白名单"实现，在这个名单上的状态均会被免疫，而不同霸体的白名单差异很大)。该状态不会解除获得该状态前已受到的控制效果。持有该效果时，周身可能会出现恢复或减伤的特效，但仅仅只是借用特效，实际效果无关。' +
      shieldDifference,
    stack: commonStack,
    source: [
      { name: '绝地反击', type: 'specialSkill' },
      { name: '魅力甲油', type: 'skill' },
      { name: '野性迸发', type: 'skill' },
      { name: '心思缜密', type: 'skill' },
      { name: '旋转桶盖', type: 'entity' },
    ],
    unuseImage: true,
  },
  绝对霸体: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '免疫几乎全部的负面状态/效果，但同时也会免疫部分正面状态/效果。该状态不会解除获得该状态前已受到的控制效果。',
    detailedDescription:
      '免疫几乎全部的负面状态/效果，但同时也会免疫部分正面状态/效果。该状态不会解除获得该状态前已受到的控制效果。' +
      shieldDifference,
    stack: commonStack,
    source: [
      { name: '横冲直撞', type: 'skill' },
      { name: '骑士连斩', type: 'skill' },
      { name: '狂', type: 'skill' },
      { name: '降落伞', type: 'skill' },
      { name: '格挡之剑', type: 'skill' },
      { name: '勇气冲刺', type: 'skill' },
    ],
    unuseImage: true,
  },
  减控: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '减少{眩晕}及类似状态的持续时间（未特别标注时，不包括{虚弱}及大多数[软控制](包括减速、禁用技能等)）。少部分减控状态附带检查机制：若获得减控时，角色身上已有可被减少时间的负面状态，则该状态的剩余时间会立刻被重新计算。',
    stack: '待测试',
    source: [
      { name: '随机应变', type: 'skill' },
      { name: '骄傲的学霸', type: 'skill' },
      { name: '西部风情', type: 'skill' },
      { name: '机械身躯', type: 'skill' },
      { name: '连控保护', type: 'buff' },
    ],
    unuseImage: true,
  }, //20251109 自此之上的部分已完成返修。TODO:ADD 解除控制 免疫虚弱
  控制转移: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['状态转移', '转移状态'],
    description:
      '友方受到部分负面控制状态（例如：眩晕）时，使友方解除该状态，但随后自身受到该状态。',
    stack:
      '[不可叠加，仅生效一个](具体机制待进一步测试)。此外，{伤害转移}和控制转移分别结算，这导致当队友受到一个既有伤害又有控制的状态效果时，根据结算顺序的不同，可能出现承受者承担2次伤害和1次控制的情况。',
    detailedStack:
      '[不可叠加，仅生效一个](具体机制待进一步测试)。此外，{伤害转移}和控制转移分别结算，这导致当队友受到一个既有伤害又有控制的状态效果时，根据结算顺序的不同，可能出现承受者承担2次伤害和1次控制的情况，这是因为先结算了“伤害转移”导致受到第一次伤害，随后结算“控制转移”时新受到的控制又和伤害绑定，导致再次受到伤害。',
    source: [
      { name: '友情庇护', type: 'skill' },
      { name: '双重猫格', type: 'skill' },
    ],
    unuseImage: true,
  },
  //--------------------软控制---------------------/
  反向: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色转向，随后使角色主动移动时改为向相反的方向移动，此外通常兼具[视野扭曲](使角色视野以波浪形和固定的频率幅度进行扭曲)的效果（有特别注明时除外）。跳跃和{飞行}期间的上下移动不受影响',
    stack: '同类效果持续时间互不影响，但效果无法叠加。',
    source: [
      { name: '香水瓶', type: 'item' },
      { name: '香水美人', type: 'skill' },
      { name: '感同身受', type: 'skill' },
      { name: '香风折扇', type: 'skill' },
      { name: '香水烟雾', type: 'entity' },
      { name: '黄色卡牌', type: 'entity' },
    ],
    unuseImage: true,
  },
  失明: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#失明', '%致盲'],
    description:
      '遮蔽角色周围小范围外的其他视野，此外通常兼具[无法查看小地图](使角色的小地图键被隐藏，无法查看)的效果（有特别注明时除外）。',
    stack: '同类效果持续时间互不影响，但效果无法叠加。',
    source: [
      { name: '胡椒瓶', type: 'item' },
      { name: '香水美人', type: 'skill' },
      { name: '感同身受', type: 'skill' },
      { name: '世界波', type: 'skill' },
      { name: '香风折扇', type: 'skill' },
      { name: '胡椒烟雾', type: 'entity' },
      { name: '煎蛋', type: 'entity' },
    ],
    unuseImage: true,
  },
  掉落手中道具: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '一次性',
    aliases: ['掉落道具', '击落道具'],
    description: '使角色手持的投掷物掉落。',
    source: [
      { name: '猛攻', type: 'knowledgeCard' },
      { name: '红色卡牌', type: 'entity' },
    ],
    unuseImage: true,
  },
  掉落手中老鼠: {
    type: '负面',
    global: false,
    target: '猫角色',
    duration: '一次性',
    aliases: ['掉落老鼠', '击落老鼠'],
    description: '使被猫抓住的老鼠掉落。',
    source: [{ name: '鱼钩', type: 'entity' }],
    unuseImage: true,
  },
  禁用道具: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['无法使用道具', '禁用道具键'],
    description: '使角色无法主动拾取、投掷、使用或放下道具。',
    stack: oneOnlyStack,
    source: [{ name: '猛攻', type: 'knowledgeCard' }],
    unuseImage: true,
  },
  立即减少技能CD: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '一次性',
    description:
      '使角色正在冷却的技能（包括主动技能、武器技能、特技、[额外技能](此处也包括"进入机器鼠")，有特殊标注时除外）立即减少一定固定值或百分比冷却。',
    stack:
      '固定值效果生效数值等于固定值，百分比效果分为两种：“根据当前冷却”或“根据最大冷却”，效果取决于具体技能。',
    unuseImage: true,
  },
  技能CD缩短: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色正在冷却的技能（通常只包括主动和武器技能）冷却倒计时加速，或使释放技能时进入的CD缩短一定数值。',
    stack: '不同效果的生效时机与生效方式各不相同，取决于具体技能。同类效果可叠加。',
    unuseImage: true,
  },
  技能CD延长: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使角色正在冷却的技能（通常只包括主动和武器技能）冷却倒计时减速，或使释放技能时进入的CD延长一定数值。',
    stack: '不同效果的生效时机与生效方式各不相同，取决于具体技能。同类效果可叠加。',
    unuseImage: true,
  },
  禁用技能: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['无法使用技能', '禁用技能键', '沉默'],
    description:
      '使角色无法使用技能，通常包括主动技能、武器技能、[额外技能](此处也包括通过“花枪反击”键释放的额外技能)以及特技，有特殊标注时除外。该效果不影响技能CD。\n该状态会在对应键位上显示"禁止"图标以作提示（有特别注明时除外）。\n不同技能的判定时机略有不同，少部分有前摇的技能会在前摇结束后再次进行判定，若此时处于禁用技能效果期间，则技能仍然会被打断并返还CD。',
    stack: oneOnlyStack,
    source: [
      { name: '猛攻', type: 'knowledgeCard' },
      { name: '贵族礼仪', type: 'skill' },
      { name: '蓝色小淘气', type: 'entity' },
      { name: '红色卡牌', type: 'entity' },
    ],
    unuseImage: true,
  },
  更改爪刀CD: {
    type: '特殊',
    global: false,
    target: '猫角色',
    duration: '不固定',
    description: '使猫角色的爪刀基础CD更改。',
    stack:
      '该效果会更改爪刀的基础CD，会作为基础速度带入{爪刀CD缩短}和{爪刀CD延长}的计算公式中。同类效果只会生效一个，具体取决于生效优先级先后。',
    unuseImage: true,
  },
  立即减少爪刀CD: {
    type: '正面',
    global: false,
    target: '猫角色',
    duration: '一次性',
    description: '使猫角色正在冷却的爪刀立即减少一定CD。',
    stack: '立即生效，不参与计算。',
    unuseImage: true,
  },
  爪刀CD缩短: {
    ...{
      type: '正面',
      global: false,
      target: '猫角色',
      duration: '不固定',
      description: '使猫角色释放爪刀时进入的CD缩短一定固定值或百分比数值。',
      unuseImage: true,
    },
    ...interactionStack,
  },
  爪刀CD延长: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      duration: '不固定',
      description: '使猫角色释放爪刀时进入的CD延长一定固定值或百分比数值。',
      unuseImage: true,
    },
    ...interactionStack,
  },
  禁用爪刀: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['缴械', '无法使用爪刀', '禁用爪刀键'],
    description:
      '使猫角色无法使用爪刀，对鼠角色[无效果](鼠角色仍会受到禁用爪刀状态，但由于本来就没有“爪刀”，因此实际不生效)。\n大部分时候该效果会在对应键位上显示"禁止"图标以作提示，但并不绝对。',
    stack: oneOnlyStack,
    source: [
      { name: '缴械', type: 'knowledgeCard' },
      { name: '贵族礼仪', type: 'skill' },
    ],
    unuseImage: true,
  }, //TODO:ADD 禁疗
  感电: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: 9.9,
    description:
      '使受到的电击伤害增加，可叠加。感电结束时获得{电免疫}，免疫电击伤害。感电持续期间接触部分水地形会触发电爆，提前结束感电效果并对周围所有角色造成{电击}和电击伤害。',
    detailedDescription:
      '使受到的电击伤害增加15，可叠加。感电结束时获得5秒{电免疫}，免疫电击伤害。感电持续期间接触[部分水地形](包括经典之家-洗碗池、夏日游轮-喷泉、游乐场-水城水域、森林牧场-湖泊/牛棚水槽等)会触发电爆，提前结束感电效果并对周围所有角色造成短暂{电击}和25电击伤害。',
    sourceDescription: '受到电击类型的{伤害}时，自动获得感电效果。',
    stack: '可叠加，每次叠加时重置持续时间。',
    unuseImage: true,
  },
  电免疫: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: 4.9,
    description: '免疫电击和电击伤害。',
    sourceDescription: '{感电}结束时，自动获得电免疫效果。',
    unuseImage: true,
  },
  交互速度提高: {
    ...{
      type: '正面',
      global: false,
      target: '角色',
      duration: '不固定',
      description:
        '使所有或指定类型的交互速度按固定值或百分比提高，例如推奶酪、火箭救援、绑火箭速度等。',
      source: [
        { name: '心灵手巧', type: 'knowledgeCard' },
        { name: '奶酪好手', type: 'skill' },
      ],
      unuseImage: true,
    },
    ...interactionStack,
  },
  交互速度降低: {
    ...{
      type: '负面',
      global: false,
      target: '角色',
      duration: '不固定',
      description:
        '使所有或指定类型的交互速度按固定值或百分比降低，例如推奶酪、火箭救援、绑火箭速度等。',
      source: [
        { name: '救救我', type: 'knowledgeCard' },
        { name: '煎蛋', type: 'entity' },
      ],
      unuseImage: true,
    },
    ...interactionStack,
  },
  //--------------------其它特殊效果---------------------/
  变身: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['#变身'],
    description:
      '变身为指定类型的衍生物。变身分为两种：一种是通过对自身施加变身状态进行变身，另一种是隐藏自身模型，并改为操作另一种指定类型的衍生物。变身效果的优先级很高，通常不会因{霸体}、{虚弱}等效果而免疫。',
    detailedDescription:
      '变身为指定类型的衍生物。变身分为两种：\n1.通过对自身施加变身状态进行变身。这类变身效果持续期间受到的伤害和效果均会实时反映到角色本体上，此类包括：{变身饮料}、{头盔}、{大星星}、{小星星}、{线条猫}等。\n2.隐藏自身模型，临时切换自身键位，改为操作另一种指定类型的衍生物。这类变身效果的变身对象受到的伤害和效果不会对角色本体造成影响，但部分能对{模型消失}目标造成效果的技能仍能直接对本体造成影响：{机器鼠(衍生物)}、{战车}、{乾坤袋(NPC)(衍生物)}、盔甲人等。\n\n变身效果的优先级很高，通常不会因{霸体}、{虚弱}等效果而免疫。',
    stack: '角色同时只能处于一种变身效果下，因此持有变身效果时通常会免疫变身。',
    source: [
      { name: '变身饮料', type: 'item' },
      { name: '头盔', type: 'entity' },
      { name: '大星星', type: 'entity' },
      { name: '小星星', type: 'entity' },
      { name: '线条猫', type: 'entity' },
      { name: '机器鼠', type: 'entity' },
      { name: '战车', type: 'entity' },
      { name: '乾坤袋(NPC)', type: 'entity' },
    ],
    unuseImage: true,
  },
  增大体型: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description: '使角色体型增大，并因此影响碰撞体积与部分特效大小。',
    source: [{ name: '小情绪', type: 'skill' }],
    unuseImage: true,
  },
  视野范围提高: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['远视'],
    description: '使角色视野范围按百分比提高。',
    stack:
      multiplicationStack +
      '但现版本绝大多数由技能/道具获得的远视效果会按优先级互相覆盖顶替，导致无法叠加。目前仅有天宫的香炉、特工行动的远视以及玩吧自定义地图设置中的远视能在部分情况下与其他远视叠加。',
    source: [
      { name: '远视饮料', type: 'item' },
      { name: '警戒', type: 'skill' },
      { name: '心思缜密', type: 'skill' },
      { name: '剑盾防御', type: 'skill' },
      { name: '追风状态', type: 'skill' },
      { name: '分身大师', type: 'skill' },
      { name: '超级变！变！变！', type: 'skill' },
      { name: '必备专业素养', type: 'skill' },
    ],
    unuseImage: true,
  },
  视野范围降低: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['%近视', '#视野范围降低', '#降低.*视野范围'],
    description: '使角色视野范围按百分比降低。',
    stack: multiplicationStack,
    source: [{ name: '意式披萨', type: 'skill' }],
    unuseImage: true,
  },
  隐匿: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '不会因被看到而显示在敌方的小地图上；开关门不产生声音和特效提示；猫咪与敌方处于同一房间时不会引起对方的胆怯动作。',
    stack:
      oneOnlyStack + '通常情况下，{隐藏位置}生效优先级高于{暴露位置}，后者生效优先级又高于{隐匿}。',
    source: [
      { name: '面粉袋', type: 'item' },
      { name: '愤怒的少女', type: 'skill' },
    ],
    unuseImage: true,
  },
  暴露位置: {
    type: '负面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['暴露视野', '暴露小地图视野', '暴露小地图位置'],
    description: '使敌方能在小地图上看到自身位置。',
    stack:
      oneOnlyStack + '通常情况下，{隐藏位置}生效优先级高于{暴露位置}，后者生效优先级又高于{隐匿}。',
    source: [
      { name: '奶酪', type: 'item' },
      { name: '远视饮料', type: 'item' },
      { name: '屈打成招', type: 'knowledgeCard' },
      { name: '寻踪', type: 'knowledgeCard' },
    ],
    unuseImage: true,
  },
  隐藏位置: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['隐藏小地图位置', '不显示小地图位置'],
    description: '使敌方无法在小地图上看到自身位置。',
    stack:
      oneOnlyStack + '通常情况下，{隐藏位置}生效优先级高于{暴露位置}，后者生效优先级又高于{隐匿}。',
    source: [{ name: '香甜梦境', type: 'skill' }],
    unuseImage: true,
  },
  模型半透明化: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使自身角色模型（包括昵称及Hp条等）变为半透明，其余效果不变。注意：部分特效仍然会保持原透明度，例如角色从高处落地时产生的"脚气"烟雾特效，{魅力香水}在自身周围的环绕特效等。',
    stack:
      oneOnlyStack + '通常情况下，{虚化}生效优先级高于{隐身}，后者生效优先级又高于{模型半透明化}。',
    sourceDescription: '在特工行动中，所有鼠角色默认持有此效果。',
    source: [{ name: '喜剧之王', type: 'skill' }],
    unuseImage: true,
  },
  隐身: {
    type: '正面',
    global: false,
    target: '角色',
    duration: '不固定',
    description:
      '使自身角色模型（包括昵称及Hp条等）对敌方变为全透明，对友方变为半透明。此外隐身状态还能免疫部分状态效果，例如斯派克的抓取等。注意：部分特效仍然会保持原透明度，例如角色从高处落地时产生的"脚气"烟雾特效，{魅力香水}在自身周围的环绕特效等。',
    stack: oneOnlyStack,
    source: [
      { name: '隐身饮料', type: 'item' },
      { name: '虚幻梦影', type: 'skill' },
      { name: '隐身', type: 'skill' },
      { name: '分身大师', type: 'skill' },
      { name: '魔咒强身', type: 'skill' },
      { name: '星星', type: 'entity' },
    ],
    unuseImage: true,
  },
  虚化: {
    type: '特殊',
    global: false,
    target: '角色',
    duration: '不固定',
    aliases: ['隐藏模型', '隐藏角色模型'],
    description:
      '使角色模型（包括昵称和Hp条）暂时被隐藏，且不再与其他物体产生碰撞，但仍能被少部分范围类效果影响。',
    sourceDescription: '角色在钻管道等状态期间处于虚化状态。',
    source: [{ name: '骑士连斩', type: 'skill' }],
    unuseImage: true,
  },
  复活: {
    type: '特殊',
    global: false,
    target: '角色',
    failure: 'Hp归零时',
    description:
      '角色被放飞时改为在[地图的固定位置](该位置因地图而异。若地图未设置该位置，则会引发bug，此时复活不会生效)重返局内，随后持续暴露位置，并且一旦Hp归零就会被真正放飞。',
    source: [
      { name: '天使祝福', type: 'skill' },
      { name: '喜剧之王', type: 'skill' },
    ],
    unuseImage: true,
  },
  临时切换键位: {
    type: '特殊',
    global: false,
    target: '角色',
    failure: '对应技能结束时',
    description: '使角色的操作键位（移动键位，技能键位等）临时发生改变。',
    source: [
      { name: '幻风礼服', type: 'skill' },
      { name: '自由翱翔', type: 'skill' },
      { name: '战术机动', type: 'skill' },
    ],
    unuseImage: true,
  },
  飞行: {
    type: '特殊',
    global: false,
    target: '角色',
    failure: '对应技能结束时',
    description:
      '完全失重，移动方式切换至摇杆，可通过摇杆向斜向的四个方向进行移动，陷入{无法移动}效果时仍可进行上下移动。进入飞行状态时若未松开方向键，则会[暂时保持方向键的移动方式](键位仍会切换至摇杆，但只能进行左右方向的移动)，直到松开按键。',
    stack: oneOnlyStack,
    source: [
      { name: '自由翱翔', type: 'skill' },
      { name: '战术机动', type: 'skill' },
    ],
    unuseImage: true,
  },
  //--------------------全局相关---------------------/
  受伤: {
    type: '负面',
    global: false,
    target: '角色',
    failure: '得到队友治疗后',
    description:
      '自身[基础Hp恢复](不包括其它来源的恢复效果)强制归零，且{移速降低5%}。其它老鼠可通过交互键治疗受伤的老鼠，成功治疗时获得少量经验。',
    stack: '角色虚弱期间不会再次受到虚弱效果，也不会重置虚弱时间。',
    unuseImage: true,
  },
  鼠虚弱: {
    type: '负面',
    global: false,
    target: '鼠角色',
    duration: 10,
    failure: '得到队友治疗后',
    description:
      '禁用技能和道具，获得高额减速及跳跃高度降低，且可被{抓起}，持续10秒。其它老鼠可通过交互键治疗虚弱的老鼠，成功治疗时获得少量经验（不会解除{受伤}）。',
    stack: '角色虚弱期间不会再次受到虚弱效果，也不会重置虚弱时间。',
    source: [
      { name: '铁血', type: 'knowledgeCard' },
      { name: '喜剧之王', type: 'skill' },
    ],
    unuseImage: true,
  },
  猫虚弱: {
    type: '负面',
    global: false,
    target: '猫角色',
    description:
      '禁用技能和道具，无法移动、跳跃，获得50Hp/秒的{恢复}效果。该效果结束时获得1秒无敌。',
    stack: '角色虚弱期间不会再次受到虚弱效果，也不会重置虚弱时间。',
    source: [{ name: '戏剧转折', type: 'skill' }],
    unuseImage: true,
  },
  抓起: {
    type: '负面',
    global: false,
    target: '鼠角色',
    aliases: ['被抓起'],
    description:
      '无法移动、跳跃、使用技能和道具，并{掉落手中道具}，只有通过挣扎键增加挣扎进度条，进度条充满时才能挣脱。',
    unuseImage: true,
  },
  直接抓起: {
    type: '负面',
    global: false,
    target: '鼠角色',
    description: '猫咪使用爪刀命中可被直接抓起的老鼠时，会将其{抓起}。',
    unuseImage: true,
  }, //TODO:ADD 跳舞跟随
  绑上火箭: {
    type: '负面',
    global: false,
    target: '鼠角色',
    aliases: ['被绑上火箭'],
    description:
      '被绑上火箭的老鼠无法移动、跳跃、使用技能和道具，同时以1/秒的基础速度减少自身所在火箭的倒计时；每隔一段时间可通过挣扎键增加挣扎进度条，进度条充满时根据挣扎类型触发+5秒/+10秒/[直接挣脱](现版本只能通过"幸运"或梦游杰瑞-1级"梦中乐园"触发)的效果。绑上火箭时会使所在火箭引线缩短10秒。',
    unuseImage: true,
  }, //TODO:ADD 直接绑上火箭（？）
  放飞: {
    type: '负面',
    global: false,
    target: '鼠角色',
    aliases: ['被放飞'],
    description:
      '使鼠方角色离开游戏，无法继续操作角色。在经典模式中，猫咪使3只老鼠被放飞即可取得胜利。',
    unuseImage: true,
  },
  伤害保护: {
    type: '正面',
    global: true,
    target: '猫角色',
    aliases: ['#伤害保护', '伤害保护机制'],
    duration: 1,
    description:
      '每层该状态使受到的伤害降低20%。注：该状态提供的效果与减伤在叠加计算方式和生效范围上略有不同。游戏中有极少部分伤害会受减伤但不受伤害保护影响。',
    stack:
      '可叠加，每次叠加刷新持续时间。当存在多层本效果时，先进行乘算后再作为一个独立的{减伤}参与伤害计算。',
    detailedStack:
      '可叠加，每次叠加刷新持续时间。当存在多层本效果时，先进行乘算后再作为一个独立的{减伤}参与伤害计算，即本效果大多数情况下可等价为一个数值为0.8的n次方的{减伤}，其中n为效果层数。\n\n' +
      damageFormula,
    sourceDescription: '猫角色受到伤害时自动获得此状态。',
    unuseImage: true,
  },
  连控保护: {
    type: '正面',
    global: true,
    target: '猫角色',
    aliases: ['#伤害保护'],
    duration: '眩晕期间及结束后2秒',
    description: '持有该状态时，使后续受到的{眩晕}等硬性控制状态持续时间减少70%。',
    stack: '重复获得时，刷新持续时间。',
    sourceDescription:
      '猫角色[连续](指的是在眩晕期间及结束后2秒内)受到2次{眩晕}等硬性控制状态后自动获得此状态，对第3次及之后的硬性控制生效。',
    unuseImage: true,
  },
  队友的鼓励: {
    type: '正面',
    global: true,
    target: '鼠角色',
    failure: '所有友方均离开自身周围后',
    description: '使自身火箭救援速度和捕鼠夹挣脱速度增加20%。',
    stack: '不可叠加。',
    sourceDescription: '鼠角色身边有同阵营角色（包括部分NPC类衍生物）时，自动获得本状态。',
    unuseImage: true,
  },
  推奶酪减伤: {
    type: '正面',
    global: true,
    target: '鼠角色',
    description: '所有鼠角色推奶酪期间，都会获得12%的减伤。\n\n' + damageFormula,
    unuseImage: true,
  },
  全局推速降低: {
    type: '负面',
    global: true,
    target: '鼠角色',
    aliases: ['全局推奶酪减速'],
    description:
      '有2个同类效果：\n1.对局前3分钟内：自身推奶酪速度降低20%。\n2.有队友被绑上火箭：自身推奶酪速度降低10%。',
    stack:
      '可与其它同类效果叠加，乘算。\n通常来说，数值的固定值与百分比形式互相独立，[各自结算](固定值效果直接加算，百分比效果先各自+100%后再乘算，最终结果再-100%)，而后分别作为一个整体带入计算公式中。先结算百分比效果，后结算固定值效果。计算公式：基础速度×(1+百分比加速)×(1-百分比减速)+固定值加速-固定值减速，其中百分比加/减速单位为%。',
    unuseImage: true,
  },
  全局推速提高: {
    type: '正面',
    global: true,
    target: '鼠角色',
    aliases: ['全局推奶酪加速'],
    description:
      '有3个同类效果：\n1.对局3分钟后：自身推奶酪速度提高20%。\n2.到达奶酪期最后1分30秒时，自身推奶酪速度提高50%，且免疫{恐吓}状态。\n3.到达奶酪期最后1分30秒且已推入4块奶酪时，自身推奶酪速度提高到原本的3倍。\n（注意：后2个效果与[游戏内的原描述](原本描述：对局剩余1分30秒时，大幅提高最后一块奶酪的推进速度，并免疫恐吓效果。)不符）',
    stack:
      '可与其它同类效果叠加，其中前两种全局推速提高效果为正常乘算，第三种效果虽然为乘算，但后于其它效果结算。\n通常来说，数值的固定值与百分比形式互相独立，[各自结算](固定值效果直接加算，百分比效果先各自+100%后再乘算，最终结果再-100%)，而后分别作为一个整体带入计算公式中。先结算百分比效果，后结算固定值效果。计算公式：基础速度×(1+百分比加速)×(1-百分比减速)+固定值加速-固定值减速，其中百分比加/减速单位为%。第三种全局推速提高效果则是在其它所有同类效果全部结算完毕后，再在计算结果上进行结算。',
    unuseImage: true,
  },
  //--------------------其它道具相关---------------------/
  燃烧速度提高: {
    type: '特殊',
    global: false,
    target: '火箭',
    aliases: ['引线长度减少'],
    description:
      '使{火箭}引线燃烧速度提高一定百分比，或使引线剩余长度缩短固定值。（经典模式中火箭基础引燃速度为1/秒，基础引线长度60秒）',
    stack: '所有固定值改变效果直接生效，百分比加速/减速效果[可叠加生效](具体计算方式待测试)。',
    source: [{ name: '加大火力', type: 'knowledgeCard' }],
    unuseImage: true,
  },
  燃烧速度降低: {
    type: '特殊',
    global: false,
    target: '火箭',
    aliases: ['引线长度增加'],
    description:
      '使{火箭}引线燃烧速度降低一定百分比，或使引线剩余长度提高固定值。（经典模式中火箭基础引燃速度为1/秒，基础引线长度60秒）',
    stack: '所有固定值改变效果直接生效，百分比加速/减速效果[可叠加生效](具体计算方式待测试)。',
    source: [
      { name: '线条火箭', type: 'entity' },
      { name: '友情庇护', type: 'skill' },
    ],
    unuseImage: true,
  },
  熄灭: {
    type: '特殊',
    global: false,
    target: '火箭',
    aliases: ['熄灭火箭'],
    description:
      '使{火箭}引线熄灭，{引燃速度}变为0，且不会被经典之家炸药堆引爆起飞；猫靠近火箭后可通过交互将其点燃，恢复引燃速度并再次触发绑上火箭导致的引线长度缩短10秒效果。',
    source: [
      { name: '沙包拳头', type: 'skill' },
      { name: '滑步踢', type: 'skill' },
      { name: '花洒', type: 'entity' },
      { name: '乾坤袋(NPC)', type: 'entity' },
    ],
    unuseImage: true,
  },
  炸毁: {
    type: '特殊',
    global: false,
    target: '火箭',
    aliases: ['炸毁火箭', '摧毁火箭'],
    description:
      '直接摧毁{火箭}，并解救{被绑上火箭}的老鼠（会触发相关知识卡），被炸毁的火箭无法绑上老鼠；猫靠近火箭后可通过交互将其修复。',
    source: [
      { name: '火药桶', type: 'entity' },
      { name: '共鸣', type: 'skill' },
    ],
    unuseImage: true,
  },
  阻止火箭放飞: {
    type: '特殊',
    global: false,
    target: '火箭',
    description:
      '使{火箭}引线燃烧至0时暂时不起飞，但通常无法阻止经典之家-杂货间炸药堆等方式导致的强制放飞。',
    sourceDescription: '老鼠在进行火箭救援时，火箭会自动获得此效果。',
    source: [
      { name: '友情庇护', type: 'skill' },
      { name: '兔子大表哥', type: 'entity' },
    ],
    unuseImage: true,
  }, //todo:补全墙缝，奶酪，特殊技能（带电）的状态效果
};

const buffsWithImages: Record<string, Buff> = Object.fromEntries(
  Object.entries(buffDefinitions).map(([buffName, buff]) => [
    buffName,
    {
      ...buff,
      name: buffName,
      imageUrl: getBuffImageUrl(buffName, buff),
    },
  ])
);

export default buffsWithImages;
